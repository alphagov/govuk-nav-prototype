<% content_for :page_class, "taxon-page" %>

<%= render partial: 'govuk_component/breadcrumbs',
  locals: {
    breadcrumbs: navigation_helpers.taxon_breadcrumbs[:breadcrumbs],
    collapse_on_mobile: true
  } %>

<%= render partial: 'page_header', locals: { taxon: taxon } %>

<% if taxon.grandchildren? %>
  <%= render partial: 'child_taxons_grid',
    locals: { child_taxons: taxon.child_taxons } %>

  <%= render partial: 'content_list_for_current_taxon', locals: {
    taxon: taxon,
    tagged_content: taxon.tagged_content,
    is_grid: true,
    mainstream_formats: mainstream_formats
  } %>
<% else %>
  <% if taxon.children? %>
    <%= render partial: 'child_taxons_list', locals: {
      accordion_content: taxon_overview_and_child_taxons(taxon),
      mainstream_formats: mainstream_formats,
      mainstream_content: mainstream_content(taxon)
    } %>
  <% else %>
    <%= render partial: 'content_list_for_current_taxon', locals: {
      taxon: taxon,
      tagged_content: taxon.tagged_content,
      mainstream_formats: mainstream_formats,
      mainstream_content: mainstream_content(taxon)
    } %>
  <% end %>
<% end %>
